# timing attack

> 这是在工作中一位同事在使用 eslint-security 的时候发现的一个攻击点，中文翻译叫时序攻击，感觉很新奇，所以记录下来。

## 前言

在一次常规的撸代码的下午，突然 eslint 报错了，what? 经过我多年的撸代码经历，已经很少能让他警告了，这次突然给我报个警告，于是打开控制台一看，`detect-possible-timing-attacks`，一脸懵逼，这是啥？

于是我又跑到 [**eslint-plugin-security**](https://github.com/nodesecurity/eslint-plugin-security) 仓库溜达了一圈，发现这个警告的源头，它指向了一篇[博客](https://snyk.io/blog/node-js-timing-attack-ccc-ctf/),更详细的信息博客里有提到，不过是英文的。

## 怎么触发这个警告？

当你使用这几个运算符的时候，就有可能触发。

这几个运算符就是 `==`, `!=`, `!==` 和 `===`。

```js
var keywords = '((' + [
    'password',
    'secret',
    'api',
    'apiKey',
    'token',
    'auth',
    'pass',
    'hash'
].join(')|(') + '))';
```

看源代码我们就会知道，当你使用上面的几个运算符加上如上的关键字，就会触发这个警告，比如说：

```js
if (inputValue === password) {
    return '登陆成功';
}
```

这样就触发了这个警告，是不是有点懵，难道不是这么写么？好吧，我原来也是这么想的，但是看了博客介绍发现确实不安全，我们继续往下看。

## 啥叫时序攻击

OK，我们先看百度咋说的: 在密码学中,时序攻击是一种侧信道攻击,攻击者试图通过分析加密算法的时间执行来推导出密码。每一个逻辑运算在计算机需要时间来执行,根据输入不同,精确测量执行时间,根据执行时间反推出密码。

简而言之，就是攻击者会利用它猜测的密码来试探真实的密码，怎么试探呢？根据你响应的时间，我们都知道，字符串的匹配是需要时间的，如果你第一位都匹配不上，那么他响应的时间就会比第一位密码匹配正确的响应时间快。